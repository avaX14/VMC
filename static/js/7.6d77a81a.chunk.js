(window["webpackJsonpreact-boilerplate"]=window["webpackJsonpreact-boilerplate"]||[]).push([[7],{372:function(e,a,t){"use strict";var r=t(385),n=t(131);r.setLocale({mixed:{required:n.a.required,oneOf:n.a.oneOf},string:{email:n.a.email}}),a.a=r},381:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var r=t(130),n=t.n(r);function s(e){var a={};for(var t in e)a[n()(t)]=e[t][0];return a}},469:function(e,a){e.exports=function(e){return null===e}},472:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(18),o=t(125),i=t(127),c=t(126),u=t(49),l=t(41),d=t(64),m="".concat("[User Profile]"," UPDATE_USER_REQUEST"),f="".concat("[User Profile]"," UPDATE_USER_SUCCESS"),p="".concat("[User Profile]"," UPDATE_USER_ERROR"),b="".concat("[User Profile]"," CHANGE_PASSWORD_REQUEST"),w="".concat("[User Profile]"," CHANGE_PASSWORD_SUCCESS"),P="".concat("[User Profile]"," CHANGE_PASSWORD_ERROR"),E={isUpdateUserPending:!1,isChangePasswordPending:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,a=arguments.length>1?arguments[1]:void 0;return Object(d.a)(e,(function(e){switch(a.type){case m:e.isUpdateUserPending=!0;break;case f:case p:e.isUpdateUserPending=!1;break;case b:e.isChangePasswordPending=!0;break;case w:case P:e.isChangePasswordPending=!1}}))},v=function(e){return e.userProfile||E};function O(e,a,t,r){return{type:m,firstName:e,lastName:a,avatar:t,meta:{setErrors:r}}}function j(e,a,t,r,n){return{type:b,currentPassword:e,newPassword:a,newPasswordConfirmation:t,meta:{setErrors:r,resetForm:n}}}var h=t(144),_=t(384),C=t(372),N=C.a.object().shape({firstName:C.a.string().required(),lastName:C.a.string().required()}),U=C.a.object().shape({currentPassword:C.a.string().required(),newPassword:C.a.string().required(),newPasswordConfirmation:C.a.string().oneOf([C.a.ref("newPassword"),null]).required()}),S=t(27),x="user_profile",y=Object(S.a)({updateUserHeader:{id:"".concat(x,".text.update_user_header"),defaultMessage:"Update Profile"},updateButton:{id:"".concat(x,".button.update"),defaultMessage:"Update"},changePasswordButton:{id:"".concat(x,".button.change_password"),defaultMessage:"Change Password"},firstNameInputLabel:{id:"".concat(x,".input_label.first_name"),defaultMessage:"First Name"},lastNameInputLabel:{id:"".concat(x,".input_label.last_name"),defaultMessage:"Last Name"},currentPasswordInputLabel:{id:"".concat(x,".input_label.current_password"),defaultMessage:"Current Password"},newPasswordInputLabel:{id:"".concat(x,".input_label.new_password"),defaultMessage:"New Password"},newPasswordConfirmationInputLabel:{id:"".concat(x,".input_label.new_password_confirmation"),defaultMessage:"New Password Confirmation"},profileUpdated:{id:"".concat(x,".notification.profile_update"),defaultMessage:"Profile informations succefully updated"},passwordChanged:{id:"".concat(x,".notifications.password_changed"),defaultMessage:"Password succefully changed"}}),k=t(132);function R(e){var a=e.field,t=e.setFieldValue,s=a.value,o=a.name,i=Object(r.useState)(Date.now()),c=Object(k.a)(i,2),u=c[0],l=c[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("input",{key:u,accept:"image/*",id:"image-upload",type:"file",onChange:function(e){t(o,e.currentTarget.files[0])}}),s&&n.a.createElement("button",{onClick:function(){t(o,null),l(Date.now())}},"Remove"))}function L(e){var a=e.user,t=e.onSubmit,r=e.isPending,s=Object(h.a)().formatMessage;return n.a.createElement(_.d,{initialValues:{firstName:a.firstName||"",lastName:a.lastName||"",avatar:a.avatar||null},validationSchema:N,onSubmit:function(e,a){var r=a.setErrors,n=e.firstName,s=e.lastName,o=e.avatar;t(n,s,o,r)},enableReinitialize:!0},(function(e){var a=e.setFieldValue;return n.a.createElement(_.c,null,n.a.createElement(_.b,{component:R,name:"avatar",setFieldValue:a}),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"firstName"},s(y.firstNameInputLabel)),n.a.createElement(_.b,{type:"text",name:"firstName",required:!0,autoFocus:!0}),n.a.createElement(_.a,{name:"firstName"},(function(e){return s(e,{label:s(y.firstNameInputLabel)})}))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"lastName"},s(y.lastNameInputLabel)),n.a.createElement(_.b,{type:"text",name:"lastName",required:!0}),n.a.createElement(_.a,{name:"lastName"},(function(e){return s(e,{label:s(y.lastNameInputLabel)})}))),n.a.createElement("button",{disabled:r,type:"submit"},s(y.updateButton)))}))}function F(e){var a=e.onSubmit,t=e.isPending,r=Object(h.a)().formatMessage;return n.a.createElement(_.d,{initialValues:{currentPassword:"",newPassword:"",newPasswordConfirmation:""},validationSchema:U,onSubmit:function(e,t){var r=t.setErrors,n=t.resetForm,s=e.currentPassword,o=e.newPassword,i=e.newPasswordConfirmation;a(s,o,i,r,n)}},n.a.createElement(_.c,null,n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"currentPassword"},r(y.currentPasswordInputLabel)),n.a.createElement(_.b,{type:"password",name:"currentPassword",required:!0}),n.a.createElement(_.a,{name:"currentPassword"},(function(e){return r(e,{label:r(y.currentPasswordInputLabel)})}))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"newPassword"},r(y.newPasswordInputLabel)),n.a.createElement(_.b,{type:"password",name:"newPassword",required:!0}),n.a.createElement(_.a,{name:"newPassword"},(function(e){return r(e,{label:r(y.newPasswordInputLabel)})}))),n.a.createElement("div",null,n.a.createElement("label",{htmlFor:"newPasswordConfirmation"},r(y.newPasswordConfirmationInputLabel)),n.a.createElement(_.b,{type:"password",name:"newPasswordConfirmation",required:!0}),n.a.createElement(_.a,{name:"newPasswordConfirmation"},(function(e){return r(e,{label:r(y.newPasswordConfirmation)})}))),n.a.createElement("button",{disabled:t,type:"submit"},r(y.changePasswordButton))))}var I=t(36),q=t.n(I),M=t(19),A=t(469),D=t.n(A),T=t(65),B=t.n(T),V=t(103),H=t(381),G=t(70),W=q.a.mark(z),J=q.a.mark(K),Q=q.a.mark(X);function z(e){var a,t,r,n,s;return q.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=e.firstName,t=e.lastName,r=e.avatar,n=e.meta.setErrors,o.prev=1,(s=new FormData).append("first_name",a),s.append("last_name",t),!D()(r)&&B()(r)&&s.append("avatar",r),o.next=8,Object(M.a)(V.a,{url:"/user",method:"post",data:s});case 8:return o.next=10,Object(M.b)({type:f});case 10:return o.next=12,Object(M.b)(Object(G.a)({message:y.profileUpdated}));case 12:o.next=21;break;case 14:if(o.prev=14,o.t0=o.catch(1),422!==o.t0.status){o.next=19;break}return o.next=19,Object(M.a)(n,Object(H.a)(o.t0.data.errors));case 19:return o.next=21,Object(M.b)({type:p,error:void 0});case 21:case"end":return o.stop()}}),W,null,[[1,14]])}function K(e){var a,t,r,n,s,o;return q.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.currentPassword,t=e.newPassword,r=e.newPasswordConfirmation,n=e.meta,s=n.setErrors,o=n.resetForm,i.prev=1,i.next=4,Object(M.a)(V.a,{url:"/user/change-password",method:"post",data:{current_password:a,new_password:t,new_password_confirmation:r}});case 4:return i.next=6,Object(M.b)({type:w});case 6:return i.next=8,Object(M.a)(o);case 8:return i.next=10,Object(M.b)(Object(G.a)({message:y.passwordChanged}));case 10:i.next=19;break;case 12:if(i.prev=12,i.t0=i.catch(1),422!==i.t0.status){i.next=17;break}return i.next=17,Object(M.a)(s,Object(H.a)(i.t0.data.errors));case 17:return i.next=19,Object(M.b)({type:P});case 19:case"end":return i.stop()}}),J,null,[[1,12]])}function X(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.d)(m,z);case 2:return e.next=4,Object(M.d)(b,K);case 4:case"end":return e.stop()}}),Q)}a.default=function(){Object(i.a)({key:"userProfile",reducer:g}),Object(c.a)({key:"userProfile",saga:X});var e=Object(s.d)(),a=Object(s.e)(Object(u.c)()),t=Object(s.e)(Object(l.a)(v,(function(e){return e.isUpdateUserPending}))),d=Object(s.e)(Object(l.a)(v,(function(e){return e.isChangePasswordPending}))),m=Object(r.useCallback)((function(){return e(O.apply(void 0,arguments))}),[e]),f=Object(r.useCallback)((function(){return e(j.apply(void 0,arguments))}),[e]);return n.a.createElement("main",null,n.a.createElement(o.a,null,n.a.createElement("title",null,"Profile - React Boilerplate")),n.a.createElement(L,{user:a,isPending:t,onSubmit:m}),n.a.createElement(F,{isPending:d,onSubmit:f}))}}}]);
//# sourceMappingURL=7.6d77a81a.chunk.js.map